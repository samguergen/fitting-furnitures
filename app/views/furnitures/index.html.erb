<div class="container furni-container">
  <div class="furni-wrapper">
    <h2> Furnitures for Sales in your Area </h2>
    <div class="filter">Filter By Type:
      <%= link_to "Beds", by_category_path(:type => "bed") %> | <%= link_to "Chairs", by_category_path(:type => "chair") %> | <%= link_to "Drawers", by_category_path(:type => "drawer") %> | <%= link_to "Desks", by_category_path(:type => "desk") %>
    </div>
    <% @furnitures.each do |furniture| %>

      <div class="furni-obj">
        <div class="furni-line1">
          <a href="/furnitures/<%= furniture.id %>"><div class="furni-img">
            <img style="width:200px; height: 200px" src=<%= furniture.image_url %>/>
          </div></a>
          <div class="descri-short">
            <b>item:</b> <%= furniture.name %><br>
            <b>condition:</b> <%= furniture.condition %><br>
            <b>dimensions:</b> <%= furniture.dimensions %><br>
            <b>cost:</b> <%= furniture.furnipoints %> furnipts<br>
            <p class="trade-buy" style="margin-top:10px">
              <button type="button" class="btn btn-default btn-lg openmodal" data-toggle="modal" data-target="#myModal" data-id="whadup">Buy</button>
              <!-- <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Buy</button> -->
            </p>
          </div>
        </div>
        <!-- <div class="descri-long">
          <%= furniture.content %><br>
        </div> -->
        <div class="furni-links-index">
        <% if session[:user_id] == furniture.user_id %>
        <%= link_to 'Edit', edit_furniture_path(furniture) %> | <%= link_to "Delete", furniture, method: :delete, data: {confirm: "Are you sure?"}, id: 'delete' %> 
        <% end %>
      </div>
      </div>

  <% end %>
  
  </div><!--furni-wrapper-->
  <br>

 <div class="new-furni"> <%= link_to 'New Furniture', new_furniture_path %> </div>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          <h4 class="modal-title">Purchase this item</h4>
        </div>
        <div class="modal-body">
          <p>This item costs furnipoints. Please select OK to confirm this purchase.</p>
          <div id="modal-data"></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
      
    </div>
  </div>

</div><!--container-->


<script>
$(document).on("click", ".openmodal", function () {
  console.log('was clicked');
     var myModalData = $(this).data('id');
     console.log(myModalData);
     $(".modal-body #modal-data").val( myModalData );
});
</script>